# 站点管理：admin

### 创建django的后台

- 在项目里运行

```
python manage.py createsuperuser
```

- 按提示输入用户名，密码，邮箱，用户名密码必填，其他选填
- 启动服务器，访问127.0.0.1:8000/admin，输入上面创建的用户名和密码并登陆
- 进入后台站点，默认提供groups，users的管理

### 注册模型

- 打开classtest/admin.py文件，注册模型

```
from django.contrib import admin
from App.models import Grade
from App.models import Student

admin.site.register(Grade)
admin.site.register(Student)
```

- 刷新admin页面，就可以对Grade和Student的数据进行管理



### 显示规则：

list_display = []

list_fiter = []

search_field = []

list_per_page = 20

ordering = []

### 分组显示：

```
fieldsets = (
				('班级', {'fields':('s_grade)}),
				('姓名', {'fields':('s_name)}),
			)

```



### 关联对象

```
from django.contrib import admin
from models import Grade,Student

class StudentInline(admin.StackedInline):
    model = Student
    extra = 2

class GradeAdmin(admin.ModelAdmin):
    inlines = [StudentInline]

admin.site.register(Grade, GradeAdmin)
```

- 可以将内嵌的方式改为表格

```
class StudentInline(admin.TabularInline)
```

### 布尔值的显示

- 发布性别的显示不是一个直观的结果，可以使用方法进行封装

```
def gender(self):
    if self.s_sex:
        return '男'
    else:
        return '女'
gender.short_description = '性别'
```

- 在admin注册中使用gender代替hgender

```
class StudentAdmin(admin.ModelAdmin):
    list_display = ['id', 'hname', 'gender', 'hcontent']

# Register your models here.
admin.site.register(ClassInfo)
admin.site.register(StudentInfo, admin_class=StudentInfoAdmin)
```